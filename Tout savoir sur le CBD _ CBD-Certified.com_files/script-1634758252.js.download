var variantImageAutomator=function(){function find_current_variant(section){var element=section||document;default_variant=0==default_variant?Object.keys(product_variants)[0]:default_variant;var queries={};return document.location.search.substr(1).split("&").forEach((function(q){var i=q.split("=");try{queries[i[0].toString()]=i[1].toString()}catch(err){}})),(isNaN(queries.variant)?element.querySelector('form[action="/cart/add"] [name="id"]:checked')?element.querySelector('form[action="/cart/add"] [name="id"]:checked').value:element.querySelector('[name="id"]')?element.querySelector('[name="id"]').value:default_variant:queries.variant?queries.variant:element.querySelector("select option[value='"+default_variant+"']").parentNode.value)||default_variant}function is_variant_in_url(){return document.location.search.indexOf("variant=")>=0}function is_array_equal(a1,a2){return JSON.stringify(a1)===JSON.stringify(a2)}function find_variant_media(variant_id){variant_id||(variant_id=find_current_variant());var variant_media=variants_media.hasOwnProperty(variant_id)?variants_media[variant_id]:variants_media[default_variant];if((!variant_media||0==variant_media.length)&&skip_showcase_image>=product_media.length)return product_media;if(!is_home&&"no_action"!=only_run_if_variant_in_url&&!is_variant_in_url()){function showcase_images(){return variants_media.g.length?variants_media.g:variant_assigned_media}if(selection_vid=0,"showcase_only"==only_run_if_variant_in_url)return showcase_images();if("showcase_and_variants"==only_run_if_variant_in_url)return variants_media.g.concat(variant_assigned_media);if("featured_only"==only_run_if_variant_in_url)return[product_media[0]];if("featured_and_showcase"==only_run_if_variant_in_url)return skip_showcase_image>0?[product_media[0]].concat(variants_media.g):showcase_images();if("show_all"==only_run_if_variant_in_url)return product_media}return"at_start"==general_images_position?variant_media=variants_media.g.concat(variant_media):"at_end"==general_images_position&&(variant_media=variant_media.concat(variants_media.g)),variant_media&&0!=variant_media.length?variant_media:product_media}var quick_view_enabled=!1,skip_showcase_image=0,selected_theme_name="Providence V2",can_execute_script=!1,is_home=!1,only_run_if_variant_in_url="no_action",limit_on_product="none",product_url="",is_product_preview=window.location.href.toLowerCase().indexOf("/products_preview")>=0,is_product_page=window.location.href.toLowerCase().indexOf("/products/")>=0,variant_id=(is_home="/"==window.location.pathname,0),selection_vid=0,last_variant_images={};if((is_home||is_product_page||is_product_preview)&&(can_execute_script=!0),quick_view_enabled)var jTimer=setInterval((function(){window.$&&window.jQuery&&clearInterval(jTimer)}),10);if(can_execute_script&&(is_home?("Startup"==selected_theme_name?product_url=document.querySelector('[data-section-type="featured-product"] .product-title a')?document.querySelector('[data-section-type="featured-product"] .product-title a').href:"":"Flow"==selected_theme_name?product_url=document.querySelector("#product-box .product-details--form-wrapper a")?document.querySelector("#product-box .product-details--form-wrapper a").href:"":"Debut"==selected_theme_name||"Success theme"==selected_theme_name||("Supply V2"==selected_theme_name?product_url=document.querySelector('[data-section-type="product-template"] a.full-details')?document.querySelector('[data-section-type="product-template"] a.full-details').href:"":"Launch"==selected_theme_name?product_url=document.querySelector(".home-featured-product .product-title a")?document.querySelector(".home-featured-product .product-title a").href:"":"Responsive"==selected_theme_name?product_url=document.querySelector(".featured-product-section .product_name a")?document.querySelector(".featured-product-section .product_name a").href:"":"Streamline"==selected_theme_name||"Broadcast"==selected_theme_name||("Palo Alto V2"==selected_theme_name?product_url=document.querySelector('[data-section-type="featured-product"]:first-child .featured-product-title a')?document.querySelector('[data-section-type="featured-product"]:first-child .featured-product-title a').href:"":"Empire V4"==selected_theme_name||"Empire V5.1"==selected_theme_name||("Startup V3"==selected_theme_name?product_url=document.querySelector(".product-title a")?document.querySelector(".product-title a").href:"":["Turbo","Turbo Seoul","Turbo Florence","Turbo Portland","Turbo Chicago","Turbo Dubai","Turbo Tennessee"].indexOf(selected_theme_name)>=0?product_url=document.querySelector(".product_section .product_name a")?document.querySelector(".product_section .product_name a").href:"":"Palo Alto V3"==selected_theme_name?product_url=document.querySelector('[data-section-type="featured-product"] .featured-product-title a')?document.querySelector('[data-section-type="featured-product"] .featured-product-title a').href:"":"Warehouse"==selected_theme_name?product_url=document.querySelector('[data-section-type="product"]:last-child .product-meta__title a')?document.querySelector('[data-section-type="product"]:last-child .product-meta__title a').href:"":"Flex"==selected_theme_name&&(product_url=document.querySelector(".shopify-section.featured-product-section.jsProduct .product-thumbnail__title a")?document.querySelector(".shopify-section.featured-product-section.jsProduct .product-thumbnail__title a").href:"")))),product_url=product_url.replace(/\/$/,"").split("?")[0].split("#")[0]):product_url=window.location.pathname.replace(/\/$/,""),product_url.length&&(void 0===window.via_product_handle||window.via_product_handle!=product_url))){var productJson;window.via_product_handle=product_url;var variants={},product_variants={};variants.g=[];var product_images=[],default_variant=0,general_images_position="at_end",variant_assigned_images=[],variants_media={},product_media=[];variants_media.g=[];var variant_assigned_media=[],product_tags="",variant_assigned_images_ids=[],variant_assigned_media_ids=[],all_variant_media=[],all_variant_images=[];function assign_variants_media(productJson){product_media=productJson.media,productJson.variants.forEach((function(variant){variant.featured_image&&-1==variant_assigned_images_ids.indexOf(variant.featured_image.id)&&(variant_assigned_images_ids.push(variant.featured_image.id),variant_assigned_images.push(variant.featured_image)),variant.featured_media&&-1==variant_assigned_media_ids.indexOf(variant.featured_media.id)&&(variant_assigned_media_ids.push(variant.featured_media.id),variant_assigned_media.push(variant.featured_media)),!default_variant&&variant.available&&(default_variant=variant.id),variant.featured_media&&(all_variant_media[variant.featured_media.id]||(all_variant_media[variant.featured_media.id]=[]),all_variant_media[variant.featured_media.id].push(variant.id)),variants_media[variant.id]=[],variant.featured_image&&(all_variant_images[variant.featured_image.id]||(all_variant_images[variant.featured_image.id]=[]),all_variant_images[variant.featured_image.id].push(variant.id)),variants[variant.id]=[],product_variants[variant.id]=variant}));var general_media=!0,current_variant_ids=[];product_media.forEach((function(media,index){general_media&&-1==variant_assigned_media_ids.indexOf(media.id)?skip_showcase_image>0&&index<skip_showcase_image||variants_media.g.push(media):(general_media=!1,(current_variant_ids=all_variant_media[media.id]?all_variant_media[media.id]:current_variant_ids).forEach((function(variant_id){variants_media[variant_id].push(media)})))}))}function assign_variant_images(images){var general_images=!0,current_variant_ids=[];(product_images=images).forEach((function(image,index){general_images&&-1==variant_assigned_images_ids.indexOf(image.id)?skip_showcase_image>0&&index<skip_showcase_image||variants.g.push(image):(general_images=!1,(current_variant_ids=all_variant_images[image.id]?all_variant_images[image.id]:current_variant_ids).forEach((function(variant_id){variants[variant_id].push(image)})))}))}function is_restrictable(){return"include_selected"==limit_on_product&&0==/via_enabled|viaenabled|via-enabled|__via_enabled/.test(product_tags.toLowerCase())||"exclude_selected"==limit_on_product&&1==/via_disabled|via-disabled|viadisabled|__via_disabled/.test(product_tags.toLowerCase())}function get_ready_with_data(_callback){var DONE=4,OK=200,xhr_for_js=new XMLHttpRequest;return xhr_for_js.open("GET",product_url+".js",!0),xhr_for_js.send(),xhr_for_js.onreadystatechange=function(){if(xhr_for_js.readyState===DONE&&xhr_for_js.status===OK){if(productJson=JSON.parse(xhr_for_js.responseText),product_tags=productJson.tags.join(),(void 0===productJson.media||0==productJson.media.length)&&0==productJson.images.length)return;assign_variants_media(productJson);var xhr_for_json=new XMLHttpRequest;xhr_for_json.open("GET",product_url+".json",!0),xhr_for_json.send(),xhr_for_json.onreadystatechange=function(){xhr_for_json.readyState===DONE&&(xhr_for_json.status===OK&&(assign_variant_images(JSON.parse(xhr_for_json.responseText).product.images),_callback()))}}},!0}function processJSONInformation(){product_tags=productJson.tags.join(),assign_variants_media(productJson),assign_variant_images(productJson.product_images),execute_app_code()}function run(){if(is_product_preview)try{productJson=JSON.parse(document.querySelector("[sa-product-json]").innerText),processJSONInformation()}catch(e){setTimeout((function(){run()}),100)}else if(document.querySelector("[sa-product-json]"))try{(productJson=JSON.parse(document.querySelector("[sa-product-json]").innerText)).media&&processJSONInformation()}catch(e){}productJson&&productJson.media||get_ready_with_data(execute_app_code)}function execute_app_code(){if(!(is_restrictable()||1==product_media.length&&1==product_images.length))var nTimer=setInterval((function(){if(void 0===window.$&&(window.jQuery||"object"==typeof wetheme&&"function"==typeof wetheme.$||"object"==typeof pipelineVendor&&"function"==typeof pipelineVendor.$||"function"==typeof jQuery_T4NT||"function"==typeof SHGJQ)&&(window.$=window.jQuery=window.jQuery||"object"==typeof wetheme&&wetheme.$||"object"==typeof pipelineVendor&&pipelineVendor.$||"function"==typeof jQuery_T4NT&&jQuery_T4NT||"function"==typeof SHGJQ&&SHGJQ),("interactive"==document.readyState||"complete"==document.readyState)&&"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&"string"==typeof jQuery.fn.jquery){if(void 0===$)var $=jQuery;clearInterval(nTimer);$(".product-single").data("section-id");$("body").append("<div id='multi-variant-info' style='display:none'></div>"),$("body").append("<div id='multi-variant-thumb' style='display:none'></div>"),$("#multi-variant-info").html($(".primary-media-types").html()),$("#multi-variant-thumb").html($(".secondary-media-types").html());var selectors={pmt:".primary-media-types",pmc:".primary-media-types .primary-media-container",pm:".primary-media",smt:".secondary-media-types",smc:".secondary-media-types .secondary-media-container",sm:".secondary-media",jsp:".js-player",ytp:".yt-player",xrv:".xr-viewer"};function providence_change_images(variant_id){function initPrimaryMedia(){var $pmc,$smc;$pmc=$(selectors.pmc+":first-child"),$smc=$(selectors.smc,cache.$smt).eq(0),$pmc.each((function(){var $this;_setActiveMedia($this=$(this),$smc),_setMediaConfig($this,$smc)}))}function initSecondaryMedia(){cache.$smcAll.each((function(){var $sma,$smc,id,variant;$smc=$(this),$(selectors.sm,$smc),$sma=$("a",$smc).eq(0),id=$smc.attr("data-media-id"),$(selectors.pmc+'[data-media-id="'+id+'"]'),variant=!1,$sma.on("click",(function(e){e.preventDefault(),variant&&Station.Theme.config.product.enableSetVariantFromSecondary?(_setActiveSecondaryMedia($smc),Station.Theme.Product.setVariantByID(variant.id,Station.Theme.config.product.enableDeepLinking)):_updateMedia($smc,!0,!0)}))}))}function _setMediaConfig($pmc,$smc,focus,autoplay){var $pm,i,id,j,len,len1,player,type,viewer;switch($pm=$(selectors.pm,$pmc),$pmc.hasClass("image-container")?type="image":$pmc.hasClass("video-container")?type="video":$pmc.hasClass("external-video-container")?type="external_video":$pmc.hasClass("model-container")&&(type="model"),focus&&$pmc.focus(),type){case"image":focus&&$pm.closest("a").focus(),cache.$pmt.is("[is-zoomable]")&&_zoom($pmc,$pm.attr("data-src-master")),Station.Theme.config.product.enableLightbox&&$pmc.on("click",(function(e){var elements,settings;e.preventDefault(),cache.$smcAll.length?(elements=$("a",cache.$smcAll),settings={index:cache.$smcAll.index($smc)}):elements=$("a",$pmc),$.fancybox(elements,settings)}));break;case"video":if(autoplay)for(i=0,len=jsPlayers.length;i<len;i++)player=jsPlayers[i],$(player.elements.container).parent().hasClass("active")&&player.play();break;case"external_video":id=$pmc.attr("data-media-id"),autoplay&&ytPlayers[id]&&ytPlayers[id].playVideo&&ytPlayers[id].playVideo();break;case"model":if(autoplay)for(j=0,len1=xrViewers.length;j<len1;j++)viewer=xrViewers[j],$(viewer.container).parents(".model-container").hasClass("active")&&viewer.play()}}function _updateMedia($smc,focus,autoplay){var $pmc,i,id,j,len,len1,player,viewer;if($smc){if($pmc=$(selectors.pmc+'[data-media-id="'+$smc.attr("data-media-id")+'"]'),jsPlayers)for(i=0,len=jsPlayers.length;i<len;i++)(player=jsPlayers[i]).playing&&player.pause();if(ytPlayers)for(id in ytPlayers)hasProp.call(ytPlayers,id)&&(player=ytPlayers[id]).getPlayerState&&1===player.getPlayerState()&&player.pauseVideo();if(xrViewers)for(j=0,len1=xrViewers.length;j<len1;j++)(viewer=xrViewers[j]).interacting&&viewer.pause();_setActiveMedia($pmc,$smc),mq.matches&&(autoplay=!1),_setMediaConfig($pmc,$smc,focus,autoplay)}}function _zoom($e,src){$e&&($($e).trigger("zoom.destroy"),$e.zoom({url:src,touch:!1,duration:0,callback:function(){return this.naturalWidth<=$e.parent().width()?$e.css("width",this.naturalWidth+"px"):$e.css("width","initial"),this.naturalHeight<=$e.parent().height()?$e.css("height",this.naturalHeight+"px"):$e.css("height","initial")}}))}function _setActivePrimaryMedia($pmc){cache.$pmcAll.length<=1||cache.$pmcAll.removeClass("active").hide(),$pmc.show().addClass("active")}function _setActiveSecondaryMedia($smc){0!==cache.$smcAll.length&&(cache.$smcAll.removeClass("active"),$smc.addClass("active"))}function _setActiveMedia($pmc,$smc){_setActivePrimaryMedia($pmc),_setActiveSecondaryMedia($smc)}if(variant_images=find_variant_media(variant_id),!is_array_equal(last_variant_images,variant_images)){last_variant_images=variant_images;var slide_images="",thumb_images="";$.each(variant_images,(function(index,image){slide_images+=$("#multi-variant-info .primary-media-container[data-media-id='"+image.id+"']").clone().wrap("<div></div>").parent().html(),thumb_images+=$("#multi-variant-thumb .secondary-media-container[data-media-id='"+image.id+"']").closest(".item").clone().wrap("<div></div>").parent().html()})),$(".primary-media-types").html(slide_images),$(".secondary-media-types>div").html(thumb_images);var cache={$pmt:$(selectors.pmt),$pmcAll:$(selectors.pmc),$smt:$(selectors.smt),$smcAll:$(selectors.smc),$jsp:$(selectors.jsp),$xrv:$(selectors.xrv)},mq=window.matchMedia("(max-width:"+Station.App.config.mediumScreen+"px)");initPrimaryMedia(),initSecondaryMedia();var jsPlayers=[],ytPlayers={},xrViewers=[]}}$("#multi-variant-info img.lazyloading").removeClass("lazyloading").addClass("lazyload"),$("#multi-variant-thumb img.lazyloading").removeClass("lazyloading").addClass("lazyload"),$("body").on("change click","select, .single-option-selector, label, .collection-swatch-wrap li",(function(){setTimeout((function(){variant_id=find_current_variant(),selection_vid!=variant_id&&(providence_change_images(variant_id),selection_vid=variant_id)}),100)})),providence_change_images()}}),10)}run()}};variantImageAutomator();